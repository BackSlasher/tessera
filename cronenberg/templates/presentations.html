{% macro singlestat(layout) -%}

<div class="span{{ layout.span }}{% if layout.offset %} offset{{ layout.offset }} {% endif %}"
{% if layout.presentation.align == 'center' %}
align="center"
{% endif %}
>
  {% if layout.emphasize %}
    <div class="well">
      <div class="singlestat banner" id="{{layout.presentation.element_id}}">
    {% else %}
      <div class="singlestat" id="{{layout.presentation.element_id}}">
  {% endif %}

  <h3>{{ layout.presentation.title }}</h3>
  <p><span class="value"></span><span class="units">{{ layout.presentation.units }}</span></p>

      </div> <!-- singlestat -->
  {% if layout.emphasize %}
    </div> <!-- well -->
  {% endif %}
</div>

<script>
    // TODO - add number format
    bean.on(cronenberg.queries.{{layout.presentation.query_name}}, 'data-available', function(query) {
        $("#{{layout.presentation.element_id}} span.value").text(query.data[{{layout.presentation.index}}].summation.{{layout.presentation.transform}});
    });
</script>

{%- endmacro %}
